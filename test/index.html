<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyScript 資料視覺化範例</title>

    <!-- 1. 引用 PyScript 的 CSS 和 JS 檔案 -->
    <!-- 這會啟用 PyScript 的所有功能 -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <!-- 簡單的頁面樣式 -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f2f5;
            padding: 20px;
        }
        .container {
            background-color: white;
            padding: 20px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
        }
        h1 {
            color: #1a237e;
        }
        #plot-container {
            margin-top: 20px;
            padding: 10px;
            border: 1px dashed #ccc;
            min-height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #loading-message {
            color: #555;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PyScript 資料視覺化範例</h1>
        <p>這個圖表是由 <strong>Python</strong> 在您的瀏覽器中生成的！我們使用了 <strong>Pandas</strong> 來建立資料，並用 <strong>Matplotlib</strong> 來繪製圖表。</p>
        
        <!-- 這個 div 將用來顯示 Matplotlib 生成的圖表 -->
        <div id="plot-container">
            <div id="loading-message">Python 環境和函式庫載入中，請稍候...</div>
        </div>

        <!-- 2. PyScript 設定區塊 -->
        <!-- 在這裡告訴 PyScript 我們需要哪些 Python 函式庫 -->
        <py-config>
            packages = ["pandas", "matplotlib"]
        </py-config>

        <!-- 3. PyScript 程式碼區塊 -->
        <!-- 在這裡編寫您的 Python 程式碼 -->
        <py-script>
            import pandas as pd
            import matplotlib.pyplot as plt
            from pyscript import display

            # 隱藏載入訊息
            loading_msg = Element("loading-message")
            loading_msg.style.display = "none"
            
            # --- 使用 Pandas 建立資料 ---
            # 假設這是一些產品的銷售數據
            data = {
                '產品類別': ['電子產品', '書籍', '服飾', '食品'],
                '銷售額(萬)': [150, 80, 120, 200]
            }
            df = pd.DataFrame(data)

            # --- 使用 Matplotlib 繪製圖表 ---
            # 建立一個圖表和座標軸
            fig, ax = plt.subplots(figsize=(8, 5))

            # 繪製長條圖
            ax.bar(df['產品類別'], df['銷售額(萬)'], color=['#42A5F5', '#66BB6A', '#FFA726', '#EF5350'])

            # 設定圖表標題和標籤
            # Matplotlib 預設不支援中文，這裡使用英文標題以確保顯示正常
            ax.set_title('Product Sales Performance')
            ax.set_xlabel('Product Category')
            ax.set_ylabel('Sales (in 10k)')
            ax.grid(axis='y', linestyle='--', alpha=0.7)
            
            # 移除圖表頂部和右側的邊框
            ax.spines['top'].set_visible(False)
            ax.spines['right'].set_visible(False)

            # 4. 將圖表顯示在網頁上
            # 我們將圖表 (fig) 輸出到 id 為 'plot-container' 的 div 中
            display(fig, target="plot-container")
        </py-script>
    </div>
</body>
</html>
